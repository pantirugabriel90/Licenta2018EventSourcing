@model Services.Queries.TopicView.GetTopicQueryResult

@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}

@{
    var topicId = Model.Id;
}
<div style="margin-top:30px;">
    <a asp-action="Index">
        <button type="button" class="btn btn-secondary float-right" >Back to List</button>
    </a>
</div>

<div>
    <div style="padding-top:1px;">
        <h2 style="margin-top:5%;"> @Html.DisplayFor(model => model.Title)</h2>
    </div>
    <hr />
    <a asp-action="AddNewReply" asp-route-id="@topicId"><button type="button" class="btn btn-primary float-right">New Reply</button></a>

    <dl class="border dl-horizontal" style="margin-top:70px;">
        <dt>
            @Html.DisplayNameFor(model => model.Content)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Content)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.Date)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.Date)
        </dd>
        <dt>
            @Html.DisplayNameFor(model => model.IssuedBy)
        </dt>
        <dd>
            @Html.DisplayFor(model => model.IssuedBy)
        </dd>
        @if (User.Identity.Name == Model.IssuedBy)
        {
            <dd>
                <a asp-action="UpdateTopic" asp-route-id="@topicId"><button type="button" class="btn btn-primary">Update Topic</button></a>
            </dd>
        }
    </dl>
    @foreach (var item in Model.Replies)
    {
        <dl class="border dl-horizontal">
            <dt>
                @Html.DisplayNameFor(modelItem => item.Content)
            </dt>
            <dd>
                @Html.DisplayFor(modelItem => item.Content)
            </dd>
            <dt>
                @Html.DisplayNameFor(modelItem => item.Date)
            </dt>
            <dd>
                @Html.DisplayFor(modelItem => item.Date)
            </dd>
            <dt>
                @Html.DisplayNameFor(modelItem => item.IssuedBy)
            </dt>
            <dd>
                @Html.DisplayFor(modelItem => item.IssuedBy)
            </dd>
            @if (User.Identity.Name == item.IssuedBy)
            {
                <dd>
                    <a asp-action="UpdateReply" asp-route-id="@topicId" asp-route-replyId="@item.Id"><button type="button" class="btn btn-primary">Edit</button></a>
                </dd>
            }
        </dl>
    }
    @if (Model.Replies.Count() > 2)
    {
        <a asp-action="AddNewReply" asp-route-id="@topicId"><button type="button" class="btn btn-primary float-right" style="margin-bottom:5%;">New Reply</button></a>


    }

</div>