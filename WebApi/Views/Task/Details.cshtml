@model Services.Queries.TaskView.GetTaskQueryResult

@{
    ViewBag.Title = "title";
    Layout = "_Layout";
}
    <div>
        <a asp-action="Index">
            <button type="button" class="btn btn-secondary float-right" id="back-button">Back to List</button>
        </a>
    </div>

    <div class="container" style="margin-top:15px; padding-top: 1px;" id="main-align">
        <h2 style="margin-top:5px;">Task</h2>

        <hr/>
        <dl class="dl-horizontal">
            <div class="row" style="margin-left:0px;">
                <dt>
                    <label value="Log hours" style="margin-right:15px;">
                        <h6><b>Title: </b></h6>
                    </label>

                </dt>
                <dd>
                    @Html.DisplayFor(model => model.Title)
                </dd>
            </div>
            <div class="row" style="margin-left:0px;">

                <dt>
                    <label value="Log hours" style="margin-right:15px;">
                        <h6><b>Content: </b></h6>
                    </label>
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.Content)
                </dd>
            </div>
            <div class="row" style="margin-left:0px;">

                <dt>
                    <label value="Log hours" style="margin-right:10px;">
                        <h6><b>Hours: </b></h6>
                    </label>
                </dt>

                <dd>
                    @Html.DisplayFor(model => model.Hours)
                </dd>
            </div>

            <div class="row" style="margin-left:0px;">

                <dt>
                    <label value="Log hours" style="margin-right:15px;">
                        <h6><b>Completed: </b></h6>
                    </label>
                </dt>
                <dd>
                    @if (Model.CompletedStatus)
                    {
                        @:&check;
                    }
                    else
                    {
                        @:&cross;
                    }
                </dd>
            </div>
            <dd>
                <form asp-action="LogHours" class="row">
                    <input type="hidden" name="AggregateId" value=@Model.Id />

                    <label style="margin-left:14px;margin-top:5px;" value="Log hours">
                        <h6><b>Log hours: </b></h6>
                    </label>
                    <input name="HoursLogged" type="number" style="width:100px;margin-right:20px;margin-left:15px;" placeholder="0" step="0.01" class="form-control" />
                    <input type="submit" value="+" class="btn" style="color:green;" />

                </form>

            </dd>
            <div class="row" style="margin-left:0px;">

                <dt>
                    <label value="Log hours" style="margin-right:15px;">
                        <h6><b>Logged hours: </b></h6>
                    </label>
                </dt>
                <dd>
                    @Html.DisplayFor(model => model.LoggedHours)
                </dd>
            </div>
        </dl>
        @{
            var taskId = Model.Id;
        }
        <div style="margin-top:50px;">
            @if (User.Identity.Name == Model.IssuedBy)
            {
                <a asp-action="UpdateTask" asp-route-id="@taskId"><button type="button" style="margin-right:20px;" class="btn btn-primary">Update Task</button></a>
                @if (!Model.CompletedStatus)
                {
                    <a asp-action="CompleteTask" asp-route-id="@taskId">

                        <button type="button" class="btn btn-success task-list-button" asp-route-redirectToTaskList="false">
                            Mark completed
                        </button>
                    </a>
                }
                else
                {
                    <a asp-action="ReopenTask" asp-route-id="@taskId" asp-route-redirectToTaskList="false">

                        <button type="button" class="btn btn-secondary task-list-button">

                            Reopen task
                        </button>
                    </a>

                }
            }
        </div>
    </div>
